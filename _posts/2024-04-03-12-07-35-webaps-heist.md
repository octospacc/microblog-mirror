---
ID: 3921
post_title: webaps heist
post_name: webaps-heist
author: minioctt
post_date: 2024-04-03 12:07:35
layout: post
link: >
  https://octospacc.altervista.org/2024/04/03/webaps-heist/
published: true
tags:
  - app
  - applicazione
  - archiviare
  - browser
  - clonare
  - codice
  - DevTools
  - esperienza
  - fix
  - HAR
  - HTML
  - JavaScript
  - metodo
  - modifiche
  - navigatore
  - ostacoli
  - pazienza
  - problemi
  - problemino
  - rehosting
  - rete
  - richieste
  - risorse
  - SalaMuseoGames
  - script
  - server
  - software
  - strumenti
  - webapp
categories:
  - Guide
  - Senza categoria
title: webaps heist
date: 2024-04-03 12:07:35
canonical_url:   https://octospacc.altervista.org/2024/04/03/webaps-heist/
---
<!-- wp:paragraph -->
<p>Il #problemino (tra i tanti!) delle #webapp √® che saranno anche <em>facili</em> da #archiviare o #clonare spesso, ma non per questo anche <em>semplici</em>... (o per caso non sono neppure facili e la mia #esperienza mi fa sottovalutare la cosa?) üò´</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>üÖ∞Ô∏è Per quelle meno complesse, il metodo migliore √® senza dubbio un bel <code>wget -kp $URL</code>, cio√® scaricare la pagina #HTML con tutte le sue risorse collegate, e convertire i link da assoluti a relativi.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>üÖ±Ô∏è Quel #metodo per√≤ non √® a conoscenza di tutte le risorse caricate dinamicamente, cio√® dichiarate in posti diversi dall'HTML. Per prendere anche quelle (ed √® spesso necessario, tutte le app moderne caricano roba cos√¨), bisogna aprire la app nel #browser, e guardare le richieste di #rete che macina con il normale uso.<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>1Ô∏è‚É£ A questo punto, si pu√≤ usare la funzione del browser per esportare le richieste in formato HAR, e poi tool come har-extractor o Har Extractor Online per ricavare i file effettivi da quel blob.<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>Ho notato per√≤ che Firefox in alcune situazioni genera #HAR corrotti (2 giochi fatti in Phaser avevo provato a scaricare, ed una volta estratti gli script tiravano errori; ho riprovato con Chromium, ed √® andato tutto liscio), quindi a prescindere io userei <em>l'altro</em> #navigatore per questa cosa. ü•¥</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Poi, non ho ben capito se per via di come il file HAR in s√© √® generato, se come quegli #strumenti lo interpretano, o un misto delle cose, ma le risorse cross-domain (e credo anche caricate da iframe?) tendono a non venir estratte, quindi si deve andare poi a pescarle prelevando l'URL di ognuna a manina dai DevTools gi√† aperti... ü§ß</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list --></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list --></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>üÜé Si potrebbero usare primo e secondo metodo insieme in linea di principio (copiando i file del primo passaggio su quelli del secondo, sovrascrivendo gli esistenti), ma nella pratica √® inutile... se c'erano link assoluti da convertire in relativi nell'HTML, con spaventosa probabilit√† questi sono presenti anche nel #JavaScript o chiss√† dove, per cui, dato che bisogner√† comunque andare a mano a modificarli da qualche parte, 1 o 2 file in pi√π non cambiano (spesso) nulla.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>2Ô∏è‚É£ Se si √® usato il secondo metodo, bisogna a questo punto effettivamente verificare che i link siano tutti corretti, le #risorse effettivamente scaricate, e la app funzionante indipendentemente dal dominio originale... il modo pi√π efficiente che ho trovato √® aprire gi√† da subito un webserver locale sui file, navigarci nel browser, e controllare sia che tutto funzioni nel pratico, sia che tutte le #richieste di rete per risorse effettive (ossia, non contano chiamate di telemetria o simili) vadano al mio #server, anzich√© al dominio originale (attivando la colonna omonima della tabella nei #DevTools lo si vede a colpo d'occhio).<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>Quando ci sono richieste che falliscono o che vanno su altri server, bisogna capire da dove nel codice queste partono, e fare le opportune #modifiche per usare URL relativi. Quelle che partono dall'HTML o dal CSS (turns out, non molte, altrimenti avremmo usato direttamente wget) sono appunto una scemenza da sistemare... ma quando partono da #script, c'√® poco da fare, con l'aiuto del debugger del browser (di nuovo, meglio Chromium, perch√© de-mininifica il JavaScript aggiungendo whitespace in automatico) si va a capire da che punto partono, e in base alla situazione si valuta che modifiche fare al #codice. Poi, si testa ancora, e ancora si applicano #fix, finch√© tutto non funziona. ‚ôªÔ∏è</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>In genere questo non √® un problema, e anche per app pi√π ostiche (come quella che ho ricaricato sulla #SalaMuseoGames ieri, <a href="https://gamingshitposting.github.io/SalaMuseoGames/2024/04/02/little-alchemy-2/">Little Alchemy 2</a>) si fa tutto in un quarto d'ora ben ristretto. Tuttavia, bisogna fare attenzione a quei programmi che caricano le risorse man mano che ne hanno bisogno e non tutto subito (in genere, maggior parte dei giochi, oppure parecchie #app React)... l√¨ si pu√≤ potenzialmente perdere un bel po' di tempo, perch√© bisogna mettersi ad usare il #software raggiungendo idealmente il 100% del codice; cio√®, cliccare tutti i bottoni, usare qualunque azione, giocare tutti i livelli... fino ad ora non ho mai incontrato #ostacoli, ma se succede, l'unica √® navigare tra il codice gi√† scaricato per vedere cos'√® che manca (da qualche parte ci sono scritti i nomi delle risorse ancora da scaricare, per ovvi motivi). üó°Ô∏è</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list --></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>üîö Aggiustamenti finali: in base alla situazione, vanno fatte altre modifiche al source per ovviare a #problemi banali ma frequenti. La maggior parte riguardano i domini, che in certi casi sono hardcodati, e quindi o ci sono iframe che comunicano con la Messaging API e gli va cambiato il dominio (come per il gioco di ieri), o c'√® del DRM che ostacola il #rehosting (come <a href="https://octospacc.altervista.org/2024/04/02/geometrico-nel-brauser/">il giochino dell'altro ieri</a>) ecc... con #pazienza si risolve tutto.<!-- wp:list -->
<ul><!-- wp:list-item -->
<li>E alla fine di tutto, una cosa che mi piace fare ma che non sarebbe obbligatoria, √® disattivare tutte le componenti potenzialmente dannose dell' #applicazione, ossia commentare via eventuali inclusioni e chiamate a sistemi di analitiche o pubblicit√†. üöØ</li>
<!-- /wp:list-item --></ul>
<!-- /wp:list --></li>
<!-- /wp:list-item --></ul>
<!-- /wp:list -->